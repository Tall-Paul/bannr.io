function reset_ui(){jQuery(".blink_me").removeClass("blink_me"),jQuery(".hover_outline").removeClass("hover_outline")}function bannr_template_preview(templates,data){reset_ui(),jQuery("#bannr_editor_templates").html(templates),jQuery.each(data,function(key1,element){jQuery.each(element,function(key2,block){var fragment=jQuery("."+block.template).html(),target=jQuery("."+block.template).data("target"),inject=jQuery("."+block.template).data("inject"),js=block.javascript||"";switch(js=Base64.decode(js),console.log(js),jQuery.each(block,function(e,t){fragment=fragment.replace("{{"+e+"}}",t),js=js.replace("{{"+e+"}}",t)}),inject){case"replace":jQuery(target).html(fragment);break;case"append":jQuery(".remove_me").remove(),jQuery(target).append('<span class="remove_me">'+fragment+"</span>");break;case"prepend":jQuery(".remove_me").remove(),jQuery(target).prepend('<span class="remove_me">'+fragment+"</span>")}eval(js)})})}function waitForJquery(){if(!window.jQuery)return void window.setTimeout(function(){waitForJquery()},10);var e=document.createElement("script");e.setAttribute("src","https://admin.bannr.io/js/select.js"),e.setAttribute("type","text/javascript"),document.getElementsByTagName("head")[0].appendChild(e),jQuery("a").each(function(){jQuery(this).attr("href",this.pathname)}),jQuery("body").append("<div id='bannr_editor_templates' style='display:none'></div>"),jQuery("div").hover(function(e){"select"==current_state&&(reset_ui(),jQuery(this).addClass("hover_outline"),e.stopPropagation())},function(e){jQuery(this).removeClass("hover_outline")}),jQuery(document).on("click",".hover_outline",function(e){if("select"==current_state)return e.stopPropagation(),reset_ui(),target=jQuery(this).getSelector(),jQuery(this).addClass("blink_me"),window.parent.postMessage({message:"div_selected",html:jQuery(this).html(),target:target},"*"),!1})}var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,r,a,n,o,i,s,c="",d=0;for(e=Base64._utf8_encode(e);d<e.length;)t=e.charCodeAt(d++),r=e.charCodeAt(d++),a=e.charCodeAt(d++),n=t>>2,o=(3&t)<<4|r>>4,i=(15&r)<<2|a>>6,s=63&a,isNaN(r)?i=s=64:isNaN(a)&&(s=64),c=c+this._keyStr.charAt(n)+this._keyStr.charAt(o)+this._keyStr.charAt(i)+this._keyStr.charAt(s);return c},decode:function(e){var t,r,a,n,o,i,s,c="",d=0;for(e=e.replace(/[^A-Za-z0-9+\/=]/g,"");d<e.length;)n=this._keyStr.indexOf(e.charAt(d++)),o=this._keyStr.indexOf(e.charAt(d++)),i=this._keyStr.indexOf(e.charAt(d++)),s=this._keyStr.indexOf(e.charAt(d++)),t=n<<2|o>>4,r=(15&o)<<4|i>>2,a=(3&i)<<6|s,c+=String.fromCharCode(t),64!=i&&(c+=String.fromCharCode(r)),64!=s&&(c+=String.fromCharCode(a));return c=Base64._utf8_decode(c)},_utf8_encode:function(e){e=e.replace(/rn/g,"n");for(var t="",r=0;r<e.length;r++){var a=e.charCodeAt(r);a<128?t+=String.fromCharCode(a):a>127&&a<2048?(t+=String.fromCharCode(a>>6|192),t+=String.fromCharCode(63&a|128)):(t+=String.fromCharCode(a>>12|224),t+=String.fromCharCode(a>>6&63|128),t+=String.fromCharCode(63&a|128))}return t},_utf8_decode:function(e){for(var t="",r=0,a=c1=c2=0;r<e.length;)a=e.charCodeAt(r),a<128?(t+=String.fromCharCode(a),r++):a>191&&a<224?(c2=e.charCodeAt(r+1),t+=String.fromCharCode((31&a)<<6|63&c2),r+=2):(c2=e.charCodeAt(r+1),c3=e.charCodeAt(r+2),t+=String.fromCharCode((15&a)<<12|(63&c2)<<6|63&c3),r+=3);return t}},current_state="navigate";window.addEventListener("message",function(e){switch(e.stopPropagation(),e.data.message){case"template_preview":bannr_template_preview(e.data.html,e.data.dat);break;case"target_change":reset_ui(),jQuery(e.data.target).addClass("blink_me");break;case"set_navigate":current_state="navigate";break;case"set_select":current_state="select"}},!1),window.onload=function(){if(!window.jQuery){var e=document.createElement("script");e.setAttribute("src","https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"),e.setAttribute("type","text/javascript"),document.getElementsByTagName("head")[0].appendChild(e)}waitForJquery()};