(function(){!function(e){var t,n,r,i,o,l,s,a;return s=e.map,o=e.extend,l=e.inArray,r=function(e,t){return-1!==l(e,t)},i=function(e){return e.replace(/([\!\"\#\$\%\&'\(\)\*\+\,\.\/\:\;<\=>\?\@\[\\\]\^\`\{\|\}\~])/g,"\\$1")},n=function(e,t){return s(e,function(e){return e===t?null:e})},a=function(e){return s(e,function(t,n){return parseInt(n,10)===parseInt(e.indexOf(t),10)?t:null})},t=function(){function t(t,n){this.element=t,this.options=o(o({},e.selectorator.options),n),this.cachedResults={}}return t.prototype.query=function(t){var n;return(n=this.cachedResults)[t]||(n[t]=e(t.replace(/#([^\s]+)/g,"[id='$1']")))},t.prototype.getProperTagName=function(){return this.element[0]?this.element[0].tagName.toLowerCase():null},t.prototype.hasParent=function(){return this.element&&0<this.element.parent().size()},t.prototype.isElement=function(){var e;return e=this.element[0],e&&e.nodeType===e.ELEMENT_NODE},t.prototype.validate=function(e,t,n,i){var o,l;if(null==n&&(n=!0),null==i&&(i=!1),l=this.query(e),n&&1<l.size()||!n&&0===l.size()){if(!t||-1!==e.indexOf(":"))return null;if(o=i?" > ":" ",e=t+o+e,l=this.query(e),n&&1<l.size()||!n&&0===l.size())return null}return r(this.element[0],l.get())?e:null},t.prototype.generate=function(){var e,t,r,i,o;if(!(this.element&&this.hasParent()&&this.isElement()))return[""];for(o=[],i=[this.generateSimple,this.generateAncestor,this.generateRecursive],t=0,r=i.length;r>t;t++)if(e=i[t],o=a(n(e.call(this))),o&&o.length>0)return o;return a(o)},t.prototype.generateAncestor=function(){var n,r,i,o,l,s,a,u,c,g,p,h,f,m;for(h=[],p=this.element.parents(),n=0,l=p.length;l>n;n++){for(u=p[n],r=!0,m=this.generateSimple(null,!1),i=0,s=m.length;s>i;i++)for(f=m[i],g=new t(e(u),this.options).generateSimple(null,!1),o=0,a=g.length;a>o;o++)c=g[o],e.merge(h,this.generateSimple(c,!0,r));r=!1}return h},t.prototype.generateSimple=function(e,t,r){var i,o,l,a,u,c,g,p;for(c=this,g=c.getProperTagName(),p=function(n){return c.validate(n,e,t,r)},a=[[c.getIdSelector],[c.getClassSelector],[c.getIdSelector,!0],[c.getClassSelector,!0],[c.getNameSelector],[function(){return[c.getProperTagName()]}]],o=0,l=a.length;l>o;o++)if(i=a[o],u=i[0].call(c,i[1])||[],u=n(s(u,p)),u.length>0)return u;return[]},t.prototype.generateRecursive=function(){var e,n,r,i;return i=this.getProperTagName(),-1!==i.indexOf(":")&&(i="*"),n=this.element.parent(),r=new t(n).generate()[0],e=n.children(i).index(this.element),i=i+":eq("+e+")",""!==r&&(i=r+" > "+i),[i]},t.prototype.getIdSelector=function(e){var t;return null==e&&(e=!1),e=e?this.getProperTagName():"",t=this.element.attr("id"),"string"!=typeof t||r(t,this.getIgnore("id"))||""===t?null:[e+"#"+i(t)]},t.prototype.getClassSelector=function(e){var t,n,o;return null==e&&(e=!1),o=this.getProperTagName(),/^(body|html)$/.test(o)?null:(e=e?o:"",n=this.getIgnore("class"),t=(this.element.attr("class")||"").replace(/\{.*\}/,"").split(/\s/),s(t,function(t){return t&&!r(t,n)?e+"."+i(t):null}))},t.prototype.getNameSelector=function(){var e,t;return t=this.getProperTagName(),e=this.element.attr("name"),e&&!r(e,this.getIgnore("name"))?[t+"[name='"+e+"']"]:null},t.prototype.getIgnore=function(e){var t,n,r;return n=this.options.ignore||{},t="class"===e?"classes":e+"s",r=n[e]||n[t],"string"==typeof r?[r]:r},t}(),e.selectorator={options:{},unique:a,clean:n,escapeSelector:i},e.fn.selectorator=function(n){return new t(e(this),n)},e.fn.getSelector=function(e){return this.selectorator(e).generate()},this}(jQuery)}).call(this);